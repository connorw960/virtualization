\documentclass[11pt]{article}
\usepackage[letterpaper, margin=2cm]{geometry}
\usepackage{titlesec}
\usepackage{mdframed}
\usepackage[dvipsnames]{xcolor} % for color names, must be loaded before tikz
\usepackage{ifthen}
\usepackage{comment}
\usepackage{fancyhdr}
\usepackage{fancyvrb}
\usepackage{titling}
\usepackage{hyperref}
\usepackage{enumitem}
\usepackage{tikz}
\usepackage{amsmath, amssymb, amsthm}

\providecommand{\due}{}
\lhead{Virtualization} \rhead{The University of Texas}
\lfoot{\due} \cfoot{} \rfoot{Page \thepage}
\renewcommand{\footrulewidth}{0.4pt}
\pagestyle{fancy}

% Eliminates the spacing in the title that remains from the empty author section.
\preauthor{}
\postauthor{}

\titleformat{\section}[runin]{\large\bfseries}{\thesection .}{3pt}{}
\titleformat{\subsection}[runin]{\bfseries}{\thesubsection)}{3pt}{}
\renewcommand\thesubsection{\alph{subsection}}

% Defines the solution environment. Toggle solutions between true and false to either show or hide solutions. Also, the solution environment takes an optional argument of arbitrary text to be inserted in the solution header.
\newboolean{solutions}
\setboolean{solutions}{true}
\ifthenelse{\boolean{solutions}}
{\newenvironment{solution}{\begin{mdframed}[skipbelow=0pt, linecolor=White, backgroundcolor=Green!10]\textbf{Solution:}}{\end{mdframed}}}
{\excludecomment{solution}}

\allowdisplaybreaks

\begin{document}

\title{Virtualization\\Pre-lab Questions --- \#0}
\date{\due}

\maketitle

\noindent \textbf{Point total:} 12
\\ All homework assignments are weighted equally in the final grade. Point values are unique to each lab assignment.

\textbf{Note:} For all problems which ask you to explain your reasoning or show your work, you do not need to show every step of each calculation, but the answer should include an explanation \emph{written with words} of what you did.  Even when work is not required to be shown, itâ€™s a good idea to include anyways so that you can earn partial credit.

\section{Question [2 points]}

Which register contains the return value of the function? What is the value you see? Is this an address or a constant value?

\begin{solution}
Your answer here.
\end{solution}


\section{Question [2 points]}

Which register contains the next assembly instruction to execute? What is the value you see? Is this an address or a constant value?

\begin{solution}
Your answer here.
\end{solution}


\section{Question [2 points]}

Using the answer from the previous question, what are the next 5 instructions that will be executed? What are the hex codes of those functions? (hint: see $display$ in gdb)
As you may notice, the function calls a c function \begin{verbatim} __asm __volatile() \end{verbatim}
The asm statement allows you to include assembly instructions directly within C code. The volatile keyword simply tells the assembler not to optimize this instruction away.

\begin{solution}
Your answer here.
\end{solution}


\section{Question [2 points]}

Explain what the following assembly instructions are doing, line by line.

\begin{center}
\begin{BVerbatim}
push   %rbp
mov    %rsp,%rbp
push   %rbx
sub    $0x18,%rsp
\end{BVerbatim}
\end{center}

\begin{solution}
Your answer here.
\end{solution}


\section{Question [2 points]}

Using the $stepi$ functionality in GDB, which will execute one instruction at a time, what do the registers look like after the above instructions are executed?

\begin{solution}
Your answer here.
\end{solution}


\section{Question [2 points]}

Notice that the first line of assembly in the \texttt{\_\_asm\_\_volatile\(\)} call is \texttt{movq \%0,\%\%rsp}. If you were to change this line to \texttt{movq \$0,\%\%rsp} (notice the \$), you would see an error in GDB the next time \texttt{rsp} is used. Why would this change introduce an error?

\begin{solution}
Your answer here.
\end{solution}


\end{document}

